{"ast":null,"code":"import _toConsumableArray from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\src\\\\app\\\\views\\\\Employee\\\\Employee.jsx\";\nimport React from \"react\";\nimport { Button, IconButton, Icon, Grid, TextField } from \"@material-ui/core\";\nimport MaterialTable from \"material-table\";\nimport { getItem, saveItem, updateItem, deleteItem, exportExcel } from \"./EmployeeService\";\nimport EmployeeDialog from \"./EmployeeDialog\";\nimport { ConfirmationDialog, Breadcrumb } from \"egret\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\ntoast.configure({\n  autoClose: 1500,\n  limit: 2\n});\n\nvar Employee = /*#__PURE__*/function (_React$Component) {\n  _inherits(Employee, _React$Component);\n\n  function Employee() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Employee);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Employee)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      employees: [],\n      typeDialog: \"\",\n      openFormDialog: false,\n      openConfirmDeleteDialog: false,\n      currentData: null,\n      searchValue: \"\",\n      reRender: false\n    };\n\n    _this.handleReRender = function () {\n      _this.setState({\n        openFormDialog: false,\n        reRender: !_this.state.reRender,\n        openConfirmDeleteDialog: false\n      });\n    };\n\n    _this.addNewEmployee = function (data) {\n      saveItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success(\"Thêm mới thành công!\");\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.updateEmployee = function (data) {\n      updateItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success(\"Cập nhật thành công!\");\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.deleteEmployee = function (data) {\n      deleteItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success(\"Xóa thành công!\");\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.handleFilter = function (employee) {\n      if (_this.state.searchInput === \"\") return employee;\n      if (employee.code.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.email.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.name.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.phone.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.age.toString().toLowerCase().includes(_this.state.searchValue.toLowerCase())) return employee;\n    };\n\n    return _this;\n  }\n\n  _createClass(Employee, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getItem({}).then(function (data) {\n        console.log(data.data);\n\n        _this2.setState({\n          employees: _toConsumableArray(data.data.data)\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this3 = this;\n\n      if (prevState.reRender !== this.state.reRender) {\n        getItem({}).then(function (data) {\n          _this3.setState({\n            employees: _toConsumableArray(data.data.data)\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          employees = _this$state.employees,\n          typeDialog = _this$state.typeDialog,\n          openFormDialog = _this$state.openFormDialog,\n          openConfirmDeleteDialog = _this$state.openConfirmDeleteDialog,\n          currentData = _this$state.currentData,\n          searchValue = _this$state.searchValue;\n      var t = this.props.t; // console.log(this.state.employees);\n\n      var columns = [{\n        title: \"Hành động\",\n        field: \"action\",\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n            onClick: function onClick() {\n              return _this4.setState({\n                typeDialog: \"update\",\n                currentData: rowData,\n                openFormDialog: true\n              });\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            color: \"primary\",\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }\n          }, \"edit\")), /*#__PURE__*/React.createElement(IconButton, {\n            onClick: function onClick() {\n              return _this4.setState({\n                currentData: rowData,\n                openConfirmDeleteDialog: true\n              });\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            color: \"error\",\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }\n          }, \"delete\")));\n        }\n      }, {\n        title: \"Code\",\n        field: \"code\"\n      }, {\n        title: \"Họ và tên\",\n        field: \"name\"\n      }, {\n        title: \"Tuổi\",\n        field: \"age\"\n      }, {\n        title: \"Email\",\n        field: \"email\"\n      }, {\n        title: \"Số điện thoại\",\n        field: \"phone\"\n      }];\n      return (\n        /*#__PURE__*/\n        // <></>\n        React.createElement(\"div\", {\n          className: \"m-sm-30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mb-sm-30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Breadcrumb, {\n          routeSegments: [{\n            name: t(\"Dashboard.category\"),\n            path: \"/directory/employees\"\n          }, {\n            name: \"Nhân viên\"\n          }],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 11\n          }\n        })), /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          spacing: 2,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          container: true,\n          justify: \"space-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this4.setState({\n              currentData: null,\n              typeDialog: \"add\",\n              openFormDialog: true\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }\n        }, \"Th\\xEAm m\\u1EDBi\")), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 3,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          value: searchValue,\n          size: \"small\",\n          placeholder: \"T\\xECm ki\\u1EBFm...\",\n          variant: \"outlined\",\n          fullWidth: true,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              searchValue: e.target.value\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }\n        }))), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(MaterialTable, {\n          title: \"\",\n          data: employees.filter(function (employee) {\n            return _this4.handleFilter(employee);\n          }),\n          columns: columns,\n          options: {\n            rowStyle: function rowStyle(rowData, index) {\n              return {\n                backgroundColor: index % 2 === 1 ? \"#EEE\" : \"#FFF\"\n              };\n            },\n            maxBodyHeight: \"450px\",\n            minBodyHeight: \"370px\",\n            headerStyle: {\n              backgroundColor: \"#358600\",\n              color: \"#fff\"\n            },\n            // padding: \"dense\",\n            search: false // exportButton: false,\n            // toolbar: false\n\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }\n        }))), openFormDialog && /*#__PURE__*/React.createElement(EmployeeDialog, {\n          closeDialog: function closeDialog() {\n            return _this4.setState({\n              openFormDialog: false\n            });\n          },\n          type: typeDialog,\n          currentData: currentData,\n          submitData: function submitData(newEmployeeData) {\n            return newEmployeeData.id ? _this4.updateEmployee(newEmployeeData) : _this4.addNewEmployee(newEmployeeData);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 11\n          }\n        }), openConfirmDeleteDialog && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n          open: openConfirmDeleteDialog,\n          onConfirmDialogClose: function onConfirmDialogClose() {\n            return _this4.setState({\n              openConfirmDeleteDialog: false\n            });\n          },\n          onYesClick: function onYesClick() {\n            return _this4.deleteEmployee(currentData);\n          },\n          title: t(\"confirm\"),\n          text: t(\"general.deleteConfirm\"),\n          Yes: t(\"Yes\"),\n          No: t(\"No\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 11\n          }\n        }))\n      );\n    }\n  }]);\n\n  return Employee;\n}(React.Component);\n\nexport default Employee;","map":{"version":3,"sources":["D:/OCEAN_TECH/L1/ThucTap/client/src/app/views/Employee/Employee.jsx"],"names":["React","Button","IconButton","Icon","Grid","TextField","MaterialTable","getItem","saveItem","updateItem","deleteItem","exportExcel","EmployeeDialog","ConfirmationDialog","Breadcrumb","toast","configure","autoClose","limit","Employee","state","employees","typeDialog","openFormDialog","openConfirmDeleteDialog","currentData","searchValue","reRender","handleReRender","setState","addNewEmployee","data","then","res","success","error","message","updateEmployee","deleteEmployee","handleFilter","employee","searchInput","code","toLowerCase","includes","email","name","phone","age","toString","console","log","prevProps","prevState","t","props","columns","title","field","render","rowData","path","e","target","value","filter","rowStyle","index","backgroundColor","maxBodyHeight","minBodyHeight","headerStyle","color","search","newEmployeeData","id","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button, IconButton, Icon, Grid, TextField } from \"@material-ui/core\";\r\nimport MaterialTable from \"material-table\";\r\nimport {\r\n  getItem,\r\n  saveItem,\r\n  updateItem,\r\n  deleteItem,\r\n  exportExcel,\r\n} from \"./EmployeeService\";\r\nimport EmployeeDialog from \"./EmployeeDialog\";\r\nimport { ConfirmationDialog, Breadcrumb } from \"egret\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\ntoast.configure({\r\n  autoClose: 1500,\r\n  limit: 2,\r\n});\r\n\r\nclass Employee extends React.Component {\r\n  state = {\r\n    employees: [],\r\n    typeDialog: \"\",\r\n    openFormDialog: false,\r\n    openConfirmDeleteDialog: false,\r\n    currentData: null,\r\n    searchValue: \"\",\r\n\r\n    reRender: false,\r\n  };\r\n\r\n  handleReRender = () => {\r\n    this.setState({\r\n      openFormDialog: false,\r\n      reRender: !this.state.reRender,\r\n      openConfirmDeleteDialog: false,\r\n    });\r\n  };\r\n\r\n  addNewEmployee = (data) => {\r\n    saveItem(data).then((res) => {\r\n      if (res.data.data) {\r\n        this.handleReRender();\r\n        toast.success(\"Thêm mới thành công!\");\r\n      } else {\r\n        toast.error(res.data.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  updateEmployee = (data) => {\r\n    updateItem(data).then((res) => {\r\n      if (res.data.data) {\r\n        this.handleReRender();\r\n        toast.success(\"Cập nhật thành công!\");\r\n      } else {\r\n        toast.error(res.data.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  deleteEmployee = (data) => {\r\n    deleteItem(data).then((res) => {\r\n      if (res.data.data) {\r\n        this.handleReRender();\r\n        toast.success(\"Xóa thành công!\");\r\n      } else {\r\n        toast.error(res.data.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  handleFilter = (employee) => {\r\n    if (this.state.searchInput === \"\") return employee;\r\n    if (\r\n      employee.code\r\n        .toLowerCase()\r\n        .includes(this.state.searchValue.toLowerCase()) ||\r\n      employee.email\r\n        .toLowerCase()\r\n        .includes(this.state.searchValue.toLowerCase()) ||\r\n      employee.name\r\n        .toLowerCase()\r\n        .includes(this.state.searchValue.toLowerCase()) ||\r\n      employee.phone\r\n        .toLowerCase()\r\n        .includes(this.state.searchValue.toLowerCase()) ||\r\n      employee.age\r\n        .toString()\r\n        .toLowerCase()\r\n        .includes(this.state.searchValue.toLowerCase())\r\n    )\r\n      return employee;\r\n  };\r\n\r\n  componentDidMount() {\r\n    getItem({}).then((data) => {\r\n      console.log(data.data);\r\n      this.setState({\r\n        employees: [...data.data.data],\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.reRender !== this.state.reRender) {\r\n      getItem({}).then((data) => {\r\n        this.setState({\r\n          employees: [...data.data.data],\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      employees,\r\n      typeDialog,\r\n      openFormDialog,\r\n      openConfirmDeleteDialog,\r\n      currentData,\r\n      searchValue,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    // console.log(this.state.employees);\r\n    const columns = [\r\n      {\r\n        title: \"Hành động\",\r\n        field: \"action\",\r\n        render: (rowData) => (\r\n          <>\r\n            <IconButton\r\n              onClick={() =>\r\n                this.setState({\r\n                  typeDialog: \"update\",\r\n                  currentData: rowData,\r\n                  openFormDialog: true,\r\n                })\r\n              }\r\n            >\r\n              <Icon color=\"primary\">edit</Icon>\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={() =>\r\n                this.setState({\r\n                  currentData: rowData,\r\n                  openConfirmDeleteDialog: true,\r\n                })\r\n              }\r\n            >\r\n              <Icon color=\"error\">delete</Icon>\r\n            </IconButton>\r\n          </>\r\n        ),\r\n      },\r\n      {\r\n        title: \"Code\",\r\n        field: \"code\",\r\n      },\r\n      {\r\n        title: \"Họ và tên\",\r\n        field: \"name\",\r\n      },\r\n      {\r\n        title: \"Tuổi\",\r\n        field: \"age\",\r\n      },\r\n      {\r\n        title: \"Email\",\r\n        field: \"email\",\r\n      },\r\n      {\r\n        title: \"Số điện thoại\",\r\n        field: \"phone\",\r\n      }\r\n    ];\r\n\r\n    return (\r\n      // <></>\r\n      <div className=\"m-sm-30\">\r\n        <div className=\"mb-sm-30\">\r\n          <Breadcrumb\r\n            routeSegments={[\r\n              { name: t(\"Dashboard.category\"), path: \"/directory/employees\" },\r\n              { name: \"Nhân viên\" },\r\n            ]}\r\n          />\r\n        </div>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item container justify=\"space-between\">\r\n            <Grid item>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() =>\r\n                  this.setState({\r\n                    currentData: null,\r\n                    typeDialog: \"add\",\r\n                    openFormDialog: true,\r\n                  })\r\n                }\r\n              >\r\n                Thêm mới\r\n              </Button>\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <TextField\r\n                value={searchValue}\r\n                size=\"small\"\r\n                placeholder=\"Tìm kiếm...\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                onChange={(e) =>\r\n                  this.setState({\r\n                    searchValue: e.target.value,\r\n                  })\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <MaterialTable\r\n              title={\"\"}\r\n              data={employees.filter((employee) => this.handleFilter(employee))}\r\n              columns={columns}\r\n              options={{\r\n                rowStyle: (rowData, index) => {\r\n                  return {\r\n                    backgroundColor: index % 2 === 1 ? \"#EEE\" : \"#FFF\",\r\n                  };\r\n                },\r\n                maxBodyHeight: \"450px\",\r\n                minBodyHeight: \"370px\",\r\n                headerStyle: {\r\n                  backgroundColor: \"#358600\",\r\n                  color: \"#fff\",\r\n                },\r\n                // padding: \"dense\",\r\n                search: false,\r\n                // exportButton: false,\r\n                // toolbar: false\r\n              }}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        {openFormDialog && (\r\n          <EmployeeDialog\r\n            closeDialog={() =>\r\n              this.setState({\r\n                openFormDialog: false,\r\n              })\r\n            }\r\n            type={typeDialog}\r\n            currentData={currentData}\r\n            submitData={(newEmployeeData) =>\r\n              newEmployeeData.id\r\n                ? this.updateEmployee(newEmployeeData)\r\n                : this.addNewEmployee(newEmployeeData)\r\n            }\r\n          />\r\n        )}\r\n        {openConfirmDeleteDialog && (\r\n          <ConfirmationDialog\r\n            open={openConfirmDeleteDialog}\r\n            onConfirmDialogClose={() =>\r\n              this.setState({\r\n                openConfirmDeleteDialog: false,\r\n              })\r\n            }\r\n            onYesClick={() => this.deleteEmployee(currentData)}\r\n            title={t(\"confirm\")}\r\n            text={t(\"general.deleteConfirm\")}\r\n            Yes={t(\"Yes\")}\r\n            No={t(\"No\")}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Employee;\r\n"]},"metadata":{},"sourceType":"module"}