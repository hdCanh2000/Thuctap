{"ast":null,"code":"import _toConsumableArray from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\OCEAN_TECH\\\\L1\\\\ThucTap\\\\client\\\\src\\\\app\\\\views\\\\Employee\\\\Employee.jsx\";\nimport React from \"react\";\nimport { Button, IconButton, Icon, Grid, TextField } from '@material-ui/core';\nimport MaterialTable from \"material-table\";\nimport { getItem, saveItem, updateItem, deleteItem, exportExcel } from './EmployeeService';\nimport EmployeeDialog from \"./EmployeeDialog\";\nimport { ConfirmationDialog, Breadcrumb } from 'egret';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\ntoast.configure({\n  autoClose: 1500,\n  limit: 2\n});\n\nvar Employee = /*#__PURE__*/function (_React$Component) {\n  _inherits(Employee, _React$Component);\n\n  function Employee() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Employee);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Employee)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      employees: [],\n      typeDialog: '',\n      openFormDialog: false,\n      openConfirmDeleteDialog: false,\n      currentData: null,\n      searchValue: '',\n      reRender: false\n    };\n\n    _this.handleReRender = function () {\n      _this.setState({\n        openFormDialog: false,\n        reRender: !_this.state.reRender,\n        openConfirmDeleteDialog: false\n      });\n    };\n\n    _this.addNewEmployee = function (data) {\n      saveItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success('Thêm mới thành công!');\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.updateEmployee = function (data) {\n      updateItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success('Cập nhật thành công!');\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.deleteEmployee = function (data) {\n      deleteItem(data).then(function (res) {\n        if (res.data.data) {\n          _this.handleReRender();\n\n          toast.success('Xóa thành công!');\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    };\n\n    _this.handleFilter = function (employee) {\n      if (_this.state.searchInput === '') return employee;\n      if (employee.code.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.email.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.name.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.phone.toLowerCase().includes(_this.state.searchValue.toLowerCase()) || employee.age.toString().toLowerCase().includes(_this.state.searchValue.toLowerCase())) return employee;\n    };\n\n    return _this;\n  }\n\n  _createClass(Employee, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getItem({}).then(function (data) {\n        // console.log(data);\n        _this2.setState({\n          employees: _toConsumableArray(data.data.data)\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this3 = this;\n\n      if (prevState.reRender !== this.state.reRender) {\n        getItem({}).then(function (data) {\n          _this3.setState({\n            employees: _toConsumableArray(data.data.data)\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          employees = _this$state.employees,\n          typeDialog = _this$state.typeDialog,\n          openFormDialog = _this$state.openFormDialog,\n          openConfirmDeleteDialog = _this$state.openConfirmDeleteDialog,\n          currentData = _this$state.currentData,\n          searchValue = _this$state.searchValue;\n      var t = this.props.t; // console.log(this.state.employees);\n\n      var columns = [{\n        title: 'Hành động',\n        field: 'action',\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n            onClick: function onClick() {\n              return _this4.setState({\n                typeDialog: 'update',\n                currentData: rowData,\n                openFormDialog: true\n              });\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            color: \"primary\",\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }\n          }, \"edit\")), /*#__PURE__*/React.createElement(IconButton, {\n            onClick: function onClick() {\n              return _this4.setState({\n                currentData: rowData,\n                openConfirmDeleteDialog: true\n              });\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            color: \"error\",\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }\n          }, \"delete\")));\n        }\n      }, {\n        title: 'Code',\n        field: 'code'\n      }, {\n        title: 'Họ và tên',\n        field: 'name'\n      }, {\n        title: 'Tuổi',\n        field: 'age'\n      }, {\n        title: 'Email',\n        field: 'email'\n      }, {\n        title: 'Số điện thoại',\n        field: 'phone'\n      }];\n      return (\n        /*#__PURE__*/\n        // <></>\n        React.createElement(\"div\", {\n          className: \"m-sm-30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mb-sm-30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Breadcrumb, {\n          routeSegments: [{\n            name: t(\"Dashboard.category\"),\n            path: \"/directory/employees\"\n          }, {\n            name: 'Nhân viên'\n          }],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }\n        })), /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          spacing: 2,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          container: true,\n          justify: \"space-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this4.setState({\n              currentData: null,\n              typeDialog: 'add',\n              openFormDialog: true\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }\n        }, \"Th\\xEAm m\\u1EDBi\")), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 3,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          value: searchValue,\n          size: \"small\",\n          placeholder: \"T\\xECm ki\\u1EBFm...\",\n          variant: \"outlined\",\n          fullWidth: true,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              searchValue: e.target.value\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }\n        }))), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(MaterialTable, {\n          title: '',\n          data: employees.filter(function (employee) {\n            return _this4.handleFilter(employee);\n          }),\n          columns: columns,\n          options: {\n            rowStyle: function rowStyle(rowData, index) {\n              return {\n                backgroundColor: index % 2 === 1 ? '#EEE' : '#FFF'\n              };\n            },\n            maxBodyHeight: '450px',\n            minBodyHeight: '370px',\n            headerStyle: {\n              backgroundColor: '#222a44',\n              color: '#fff'\n            },\n            padding: 'dense',\n            search: false,\n            exportButton: true // toolbar: false\n\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }\n        }))), openFormDialog && /*#__PURE__*/React.createElement(EmployeeDialog, {\n          closeDialog: function closeDialog() {\n            return _this4.setState({\n              openFormDialog: false\n            });\n          },\n          type: typeDialog,\n          currentData: currentData,\n          submitData: function submitData(newEmployeeData) {\n            return newEmployeeData.id ? _this4.updateEmployee(newEmployeeData) : _this4.addNewEmployee(newEmployeeData);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 39\n          }\n        }), openConfirmDeleteDialog && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n          open: openConfirmDeleteDialog,\n          onConfirmDialogClose: function onConfirmDialogClose() {\n            return _this4.setState({\n              openConfirmDeleteDialog: false\n            });\n          },\n          onYesClick: function onYesClick() {\n            return _this4.deleteEmployee(currentData);\n          },\n          title: t(\"confirm\"),\n          text: t('general.deleteConfirm'),\n          Yes: t('Yes'),\n          No: t('No'),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 48\n          }\n        }))\n      );\n    }\n  }]);\n\n  return Employee;\n}(React.Component);\n\nexport default Employee;","map":{"version":3,"sources":["D:/OCEAN_TECH/L1/ThucTap/client/src/app/views/Employee/Employee.jsx"],"names":["React","Button","IconButton","Icon","Grid","TextField","MaterialTable","getItem","saveItem","updateItem","deleteItem","exportExcel","EmployeeDialog","ConfirmationDialog","Breadcrumb","toast","configure","autoClose","limit","Employee","state","employees","typeDialog","openFormDialog","openConfirmDeleteDialog","currentData","searchValue","reRender","handleReRender","setState","addNewEmployee","data","then","res","success","error","message","updateEmployee","deleteEmployee","handleFilter","employee","searchInput","code","toLowerCase","includes","email","name","phone","age","toString","prevProps","prevState","t","props","columns","title","field","render","rowData","path","e","target","value","filter","rowStyle","index","backgroundColor","maxBodyHeight","minBodyHeight","headerStyle","color","padding","search","exportButton","newEmployeeData","id","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Button, IconButton, Icon, Grid, TextField } from '@material-ui/core'\r\nimport MaterialTable from \"material-table\"\r\nimport { getItem, saveItem, updateItem, deleteItem, exportExcel } from './EmployeeService'\r\nimport EmployeeDialog from \"./EmployeeDialog\";\r\nimport { ConfirmationDialog, Breadcrumb } from 'egret'\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\ntoast.configure({\r\n    autoClose: 1500,\r\n    limit: 2\r\n});\r\n\r\nclass Employee extends React.Component {\r\n\r\n    state = {\r\n        employees: [],\r\n        typeDialog: '',\r\n        openFormDialog: false,\r\n        openConfirmDeleteDialog: false,\r\n        currentData: null,\r\n        searchValue: '',\r\n\r\n        reRender: false\r\n    }\r\n\r\n    handleReRender = () => {\r\n        this.setState({\r\n            openFormDialog: false,\r\n            reRender: !this.state.reRender,\r\n            openConfirmDeleteDialog: false\r\n        })\r\n    }\r\n\r\n    addNewEmployee = (data) => {\r\n        saveItem(data).then((res) => {\r\n            if (res.data.data) {\r\n                this.handleReRender()\r\n                toast.success('Thêm mới thành công!')\r\n            } else {\r\n                toast.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    updateEmployee = (data) => {\r\n        updateItem(data).then((res) => {\r\n            if (res.data.data) {\r\n                this.handleReRender()\r\n                toast.success('Cập nhật thành công!')\r\n            } else {\r\n                toast.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    deleteEmployee = (data) => {\r\n        deleteItem(data).then((res) => {\r\n            if (res.data.data) {\r\n                this.handleReRender()\r\n                toast.success('Xóa thành công!')\r\n            } else {\r\n                toast.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    handleFilter = (employee) => {\r\n        if (this.state.searchInput === '') return employee\r\n        if (\r\n            employee.code.toLowerCase().includes(this.state.searchValue.toLowerCase()) ||\r\n            employee.email.toLowerCase().includes(this.state.searchValue.toLowerCase()) ||\r\n            employee.name.toLowerCase().includes(this.state.searchValue.toLowerCase()) ||\r\n            employee.phone.toLowerCase().includes(this.state.searchValue.toLowerCase()) ||\r\n            employee.age.toString().toLowerCase().includes(this.state.searchValue.toLowerCase())\r\n        )\r\n            return employee\r\n    }\r\n\r\n    componentDidMount() {\r\n        getItem({}).then((data) => {\r\n            // console.log(data);\r\n            this.setState({\r\n                employees: [...data.data.data]\r\n            })\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.reRender !== this.state.reRender) {\r\n            getItem({}).then((data) => {\r\n                this.setState({\r\n                    employees: [...data.data.data]\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        let { employees, typeDialog, openFormDialog, openConfirmDeleteDialog, currentData, searchValue } = this.state\r\n        let { t } = this.props\r\n        // console.log(this.state.employees);\r\n        const columns = [\r\n            {\r\n                title: 'Hành động',\r\n                field: 'action',\r\n                render: (rowData) => (\r\n                    <>\r\n                        <IconButton onClick={() => this.setState({\r\n                            typeDialog: 'update',\r\n                            currentData: rowData,\r\n                            openFormDialog: true\r\n                        })}>\r\n                            <Icon color=\"primary\">edit</Icon>\r\n                        </IconButton>\r\n                        <IconButton onClick={() => this.setState({\r\n                            currentData: rowData,\r\n                            openConfirmDeleteDialog: true\r\n                        })}>\r\n                            <Icon color=\"error\">delete</Icon>\r\n                        </IconButton>\r\n                    </>\r\n                )\r\n            },\r\n            {\r\n                title: 'Code',\r\n                field: 'code'\r\n            },\r\n            {\r\n                title: 'Họ và tên',\r\n                field: 'name'\r\n            },\r\n            {\r\n                title: 'Tuổi',\r\n                field: 'age'\r\n            },\r\n            {\r\n                title: 'Email',\r\n                field: 'email'\r\n            },\r\n            {\r\n                title: 'Số điện thoại',\r\n                field: 'phone'\r\n            },\r\n        ]\r\n\r\n        return (\r\n            // <></>\r\n            <div className=\"m-sm-30\" >\r\n\r\n                <div className=\"mb-sm-30\">\r\n                    <Breadcrumb routeSegments={[{ name: t(\"Dashboard.category\"), path: \"/directory/employees\" }, { name: 'Nhân viên' }]} />\r\n                </div>\r\n\r\n                <Grid container spacing={2}>\r\n                    <Grid item container justify=\"space-between\">\r\n                        <Grid item>\r\n                            <Button variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={() => this.setState({\r\n                                    currentData: null,\r\n                                    typeDialog: 'add',\r\n                                    openFormDialog: true\r\n                                })}\r\n                            >Thêm mới</Button>\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                            <TextField\r\n                                value={searchValue}\r\n                                size=\"small\"\r\n                                placeholder=\"Tìm kiếm...\"\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                onChange={(e) => this.setState({\r\n                                    searchValue: e.target.value\r\n                                })}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <MaterialTable\r\n                            title={''}\r\n                            data={employees.filter(employee => this.handleFilter(employee))}\r\n                            columns={columns}\r\n                            options={{\r\n                                rowStyle: (rowData, index) => {\r\n                                    return ({\r\n                                        backgroundColor: (index % 2 === 1) ? '#EEE' : '#FFF'\r\n                                    })\r\n                                },\r\n                                maxBodyHeight: '450px',\r\n                                minBodyHeight: '370px',\r\n                                headerStyle: {\r\n                                    backgroundColor: '#222a44',\r\n                                    color: '#fff',\r\n                                },\r\n                                padding: 'dense',\r\n                                search: false,\r\n                                exportButton: true,\r\n                                // toolbar: false\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n                {\r\n                    openFormDialog && <EmployeeDialog\r\n                        closeDialog={() => this.setState({\r\n                            openFormDialog: false\r\n                        })}\r\n                        type={typeDialog}\r\n                        currentData={currentData}\r\n                        submitData={(newEmployeeData) => newEmployeeData.id ? this.updateEmployee(newEmployeeData) : this.addNewEmployee(newEmployeeData)}\r\n                    />\r\n                }\r\n                {\r\n                    openConfirmDeleteDialog && <ConfirmationDialog\r\n                        open={openConfirmDeleteDialog}\r\n                        onConfirmDialogClose={() => this.setState({\r\n                            openConfirmDeleteDialog: false\r\n                        })}\r\n                        onYesClick={() => this.deleteEmployee(currentData)}\r\n                        title={t(\"confirm\")}\r\n                        text={t('general.deleteConfirm')}\r\n                        Yes={t('Yes')}\r\n                        No={t('No')}\r\n                    />\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Employee\r\n"]},"metadata":{},"sourceType":"module"}